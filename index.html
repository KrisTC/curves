<!DOCTYPE html>
<html lang="en" style="height: 100%">
	<head>
    	<meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
    	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    	<title>Curve Rendering</title>

        <script id="curve-render-vertex-shader" type="x-shader/x-fragment">
            uniform vec2 uPoints[NO_OF_CONTROL_POINTS];
            uniform vec2 uTangents[NO_OF_CONTROL_POINTS];
            
            #ifdef USE_COLOR
                varying vec3 vColor;
            #endif
            
            attribute float segmentDelta;
            varying float vSegmentDelta;
            
            attribute float segmentIndex;
            
            varying vec2 vP0;
            varying vec2 vP1;
            varying vec2 vT0;
            varying vec2 vT1;
            
            varying vec2 vUV;
            
            void main() {
                vColor = color;
                vSegmentDelta = segmentDelta;
                vUV = uv;
                
                int point0Index = int(segmentIndex);
                vP0 = uPoints[point0Index];
                vT0 = uTangents[point0Index];
                
                int point1Index = point0Index + 1;
                vP1 = uPoints[point1Index];
                vT1 = uTangents[point1Index];
                
                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
            }
        </script>
        
        <script id="curve-render-fragment-shader" type="x-shader/x-fragment">
            uniform sampler2D uTexture;
                        
            #ifdef USE_COLOR
                varying vec3 vColor;
            #endif
            
            varying float vSegmentDelta;
            varying vec2 vP0;
            varying vec2 vP1;
            varying vec2 vT0;
            varying vec2 vT1;
            varying vec2 vUV;
            
            void main() {
                //gl_FragColor = vec4(vSegmentDelta, vSegmentDelta, vSegmentDelta, 1);
                gl_FragColor = texture2D(uTexture, vUV);
            }
        </script>
        
		<!-- Bootstrap -->
		<link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="styles.css" />
		
		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="bower_components/jquery/dist/jquery.min.js"></script>
		<script src="bower_components/three.js/build/three.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="js/curves.js"></script>
  	</head>
  	<body>
	  	<div class="layout-header layout-row">
			<div class="btn-group" role="group" aria-label="...">
				<span class="navbar-text h2">Curves demo</span>
				<span class="navbar-text">Select a source image:</span>		
				<input type="file" id="loadSourceImage" class="btn btn-default navbar-btn" />
			</div>
		</div>
		<div class="layout-left layout-row layout-toolbar">
			<div class="btn-toolbar" role="toolbar" aria-label="...">
				<div class="btn-group" role="group" aria-label="...">
					<button type="button" class="btn btn-default navbar-btn" id="zoomButton">
						<span class="glyphicon glyphicon-search" aria-hidden="true"></span> Zoom
					</button>
					<button type="button" class="btn btn-default navbar-btn" id="panButton">
						<span class="glyphicon glyphicon-fullscreen" aria-hidden="true"></span> Pan
					</button>
					<button type="button" class="btn btn-default navbar-btn" id="addPointsButton">
						<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Add Points
					</button>
				</div>
			</div>
		</div>
		
		<div class="layout-right layout-row layout-toolbar">
			<div class="btn-toolbar" role="toolbar" aria-label="...">
				<div class="btn-group" role="group" aria-label="...">
					<button type="button" class="btn btn-default navbar-btn">Left</button>
					<button type="button" class="btn btn-default navbar-btn">Middle</button>
					<button type="button" class="btn btn-default navbar-btn">Right</button>
				</div>
			</div>
		</div>
	
		<div class="layout-visualiser layout-row">
			<div id="content" class="layout-left layout-col">
			</div>
			<div id="render" class="layout-right layout-col">
			</div>
		</div>
		
		<div class="layout-footer layout-row">
			My footer
		</div>
  </body>
</html>